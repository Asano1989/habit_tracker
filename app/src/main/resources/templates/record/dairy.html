<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
  <title th:text="${title}">この日の学習記録 | The Pomo - 学習時間記録アプリ</title>
  <script th:src="@{/js/menu.js}"></script>
</head>

<body class="bg-[#f1efec] text-[#123458]">
  <!-- Header Fragment -->
  <div th:replace="fragments/header :: header"></div>

  <!-- User Menu Fragment -->
  <div th:replace="fragments/userMenu :: user-menu"></div>

  <!-- Main Content -->
  <div class="max-w-7xl mx-auto px-4 md:px-6 py-8 md:py-10">
    <!-- Page Title -->
    <h1 class="text-3xl md:text-4xl font-bold text-[#030303] mb-8">
      <span th:text="${#temporals.format(date, 'yyyy/MM/dd')}"></span>の学習記録
    </h1>

    <!-- Daily Summary Table -->
    <div class="bg-white rounded-lg shadow-md overflow-hidden mb-8">
      <div class="overflow-x-auto">
        <table class="w-full border-collapse">
          <thead>
            <tr class="border-b border-[#d4c9be] transition-colors">
              <th class="px-4 md:px-6 py-4 bg-[#d4c9be] font-semibold text-[#030303] text-sm md:text-base border-r border-[#d4c9be] w-1/4 md:w-1/5">学習項目</th>
              <td class="px-4 md:px-6 py-4 text-[#123458] text-sm md:text-base">
                <ul th:each="subject:${lSubjectList}" class="list-disc list-inside space-y-1">
                  <li th:text="${subject.name}"></li>
                </ul>
              </td>
            </tr>
            <tr class="border-b border-[#d4c9be] transition-colors">
              <th class="px-4 md:px-6 py-4 bg-[#d4c9be] font-semibold text-[#030303] text-sm md:text-base border-r border-[#d4c9be] w-1/4 md:w-1/5">合計学習時間</th>
              <td class="px-4 md:px-6 py-4 text-[#123458] text-sm md:text-base"><span th:text="${#temporals.format(totalSumTime, 'HH')}"></span>h<span th:text="${#temporals.format(totalSumTime, 'mm')}"></span>m</td>
            </tr>
            <tr class="border-b border-[#d4c9be] transition-colors">
              <th class="px-4 md:px-6 py-4 bg-[#d4c9be] font-semibold text-[#030303] text-sm md:text-base border-r border-[#d4c9be] w-1/4 md:w-1/5">合計ポモドーロ</th>
              <td class="px-4 md:px-6 py-4 text-[#123458] text-sm md:text-base" th:text="${totalPomodoro}"></td>
            </tr>
          </thead>
        </table>
      </div>
    </div>

    <!-- Markdown Output Section -->
    <div class="bg-white rounded-lg shadow-md overflow-hidden mb-8">
      <div class="bg-[#d4c9be] px-4 md:px-6 py-4 border-b-2 border-[#d4c9be]">
        <h2 class="text-xl md:text-2xl font-bold text-[#030303]">Markdown形式で出力</h2>
      </div>
      <div class="p-4 md:p-6">
        <!-- Markdown Output -->
        <pre class="bg-[#f1efec] border-2 border-[#d4c9be] rounded p-4 overflow-x-auto text-sm md:text-base leading-relaxed text-[#123458] font-mono whitespace-pre-wrap break-words"><code># <span th:text="${#temporals.format(date, 'yyyy/MM/dd（EEE）')}"></span>

【学習時間】 **<span th:text="${#temporals.format(totalSumTime, 'HH')}"></span>h<span th:text="${#temporals.format(totalSumTime, 'mm')}"></span>m**
【ポモドーロ数】 **<span th:text="${totalPomodoro}"></span>ポモドーロ**
***

## 学習項目（やったこと）一覧
<span th:each="subject:${lSubjectList}"> - <span th:text="${subject.name}"></span>
</span>
***</code></pre>
      </div>
      <!-- Copy Button Info -->
      <div class="px-4 md:px-6 py-4 bg-[#f1efec] border-t border-[#d4c9be] text-sm text-[#123458]">
        <p>※ 上記のテキストをコピーして、.mdファイルに貼り付けてご利用ください</p>
      </div>
    </div>

    <!-- Back Link -->
    <div class="text-center mb-8">
      <a th:href="@{/record}" class="text-[#123458] font-medium hover:text-[#030303] transition-colors text-sm md:text-base">
        ← 学習記録一覧に戻る
      </a>
    </div>
  </div>
</body>
</html>
