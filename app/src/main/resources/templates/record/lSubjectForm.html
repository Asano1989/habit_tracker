<!DOCTYPE html>
<html xmlns:th ="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <title>学習項目フォーム</title>
  </head>
  <body>
    <form th:action="@{/}" method="post" th:object="${learningSubjectForm}">
      <table>
        <tr>
          <th>id</th>
          <td>
            <span th:text ="*{id}"></span>
            <input type ="hidden" th:field ="*{id}">
          </td>
        </tr>
        <tr>
          <th>user</th>
          <td>
            <span th:text ="*{user.name}"></span>
            <input type ="hidden" th:field ="*{userId}">
          </td>
        </tr>
        <tr>
          <th>項目名</th>
          <td>
            <input type="text" name ="name" th:value="*{name}">
            <div th:if="${#fields.hasErrors('name')}" th:errors="*{name}" th:errorclass="red"></div>
          </td>
        </tr>
        <tr>
          <th>説明</th>
          <td>
            <textarea rows="2" name ="description" th:text="*{description}"></textarea>
            <div th:if="${#fields.hasErrors('description')}" th:errors="*{description}" th:errorclass="red"></div>
          </td>
        </tr>
      </table>
      <div th:if="${session.mode == 'update'}">
        <button type="submit" th:formaction="@{/subject/update}" class="btn btn-primary active">更新</button>
        <button type="submit" th:formaction="@{/subject/__${learningSubjectForm.id}__/delete}" onclick="return confirm('学習項目を削除すると、紐づいている学習記録も削除されます。\n本当に削除しますか？');" class="btn btn-danger active">削除</button>
        <button type="submit" th:formaction="@{/subject/cancel}" class="btn btn-sm btn-warning">キャンセル</button>
      </div>
      <div th:unless="${session.mode == 'update'}">
        <button type="submit" th:formaction="@{/subject/create/do}" class="btn btn-primary active">登録</button>
        <button type="submit" th:formaction="@{/subject/cancel}" class="btn btn-sm btn-warning">キャンセル</button>
      </div>
    </form>
  </body>
</html>